{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Phong\\\\Desktop\\\\ReactShop\\\\1223\\\\Shop_User\\\\src\\\\components\\\\LoginRegisterModal\\\\LoginForm.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { userLogin } from \"../../redux/actions/LoginAction\";\nimport Validator from \"../../utils/Validator\";\nimport { DEFAULT_RULE, NAME_RULE } from \"../../utils/Validator/rule\";\nimport PropTypes from \"prop-types\";\nimport LoadingButton from \"../LoadingButton\";\nimport { showToast } from \"../Common/CustomToast\";\nimport { withRouter } from 'react-router-dom';\nimport { commonData } from \"utils/commonData\";\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n    this.handleKeyPress = event => {\n      if (event.key === 'Enter') {\n        this.handleSubmit();\n      }\n    };\n    this.handleSubmit = () => {\n      const {\n        username,\n        password\n      } = this.state;\n      if (!Validator(username, NAME_RULE)) {\n        showToast('Tên đăng nhập không hợp lệ', 'error');\n        return;\n      }\n      if (!Validator(password, DEFAULT_RULE)) {\n        showToast('Mật khẩu không hợp lệ', 'error');\n        return;\n      }\n      this.setState({\n        loading: true\n      });\n      this.props.userLogin(username, password).then(res => {\n        if (res && res.data) {\n          var _res$data;\n          localStorage.setItem(\"current_user\", JSON.stringify((_res$data = res.data) !== null && _res$data !== void 0 ? _res$data : \"\"));\n          this.setState({\n            loading: false\n          });\n          showToast('Đăng nhập thành công', commonData.success_type);\n          this.props.onhide();\n          this.props.history.push('/');\n        } else {\n          this.setState({\n            loading: false\n          });\n          showToast('Tài khoản hoặc mật khẩu không chính xác', 'error');\n        }\n      }).catch(error => {\n        console.log(error.response);\n        this.setState({\n          loading: false\n        });\n      });\n    };\n    this.state = {\n      username: \"admin\",\n      password: \"\",\n      //123456aA@\n      loading: false\n    };\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, \"\\u0110\\u0103ng nh\\u1EADp\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp \",\n      id: \"username\",\n      name: \"username\",\n      value: this.state.username,\n      onChange: this.handleChange,\n      autoComplete: \"false\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group log-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"M\\u1EADt kh\\u1EA9u\",\n      id: \"Passwod\",\n      name: \"password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      autoComplete: \"false\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-lock\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, \"Invalid Credentials\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"link\",\n      href: \"#\",\n      onClick: this.props.forgotPasswordClicked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, \"Qu\\xEAn m\\u1EADt kh\\u1EA9u ?\"), /*#__PURE__*/React.createElement(LoadingButton, {\n      type: \"button\",\n      className: \"log-btn\",\n      loading: this.state.loading,\n      onClick: () => this.handleSubmit(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, \"\\u0110\\u0103ng nh\\u1EADp\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.props.registerclicked,\n      style: {\n        textAlign: \"center\",\n        fontSize: 12,\n        color: \"#c4c4c4\",\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, \"\\u0110\\u0103ng k\\xFD th\\xE0nh vi\\xEAn m\\u1EDBi\")));\n  }\n}\nLoginForm.propTypes = {\n  forgotPasswordClicked: PropTypes.func,\n  registerclicked: PropTypes.func\n};\nconst mapDispatchToProps = {\n  userLogin\n};\nconst mapStoreToProps = state => ({\n  login_loading: state.login.login_loading,\n  login_error: state.login.error\n});\nexport default connect(mapStoreToProps, mapDispatchToProps)(withRouter(LoginForm));","map":{"version":3,"names":["React","Component","connect","userLogin","Validator","DEFAULT_RULE","NAME_RULE","PropTypes","LoadingButton","showToast","withRouter","commonData","LoginForm","constructor","props","handleChange","e","name","value","target","setState","handleKeyPress","event","key","handleSubmit","username","password","state","loading","then","res","data","_res$data","localStorage","setItem","JSON","stringify","success_type","onhide","history","push","catch","error","console","log","response","render","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","type","placeholder","id","onChange","autoComplete","href","onClick","forgotPasswordClicked","registerclicked","style","textAlign","fontSize","color","cursor","propTypes","func","mapDispatchToProps","mapStoreToProps","login_loading","login","login_error"],"sources":["C:/Users/Phong/Desktop/ReactShop/1223/Shop_User/src/components/LoginRegisterModal/LoginForm.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { userLogin } from \"../../redux/actions/LoginAction\";\r\nimport Validator from \"../../utils/Validator\";\r\nimport { DEFAULT_RULE, NAME_RULE } from \"../../utils/Validator/rule\";\r\nimport PropTypes from \"prop-types\";\r\nimport LoadingButton from \"../LoadingButton\";\r\nimport { showToast } from \"../Common/CustomToast\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport { commonData } from \"utils/commonData\";\r\n\r\n\r\nclass LoginForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"admin\",\r\n      password: \"\", //123456aA@\r\n      loading: false\r\n    };\r\n  }\r\n\r\n  handleChange = e => {\r\n    const { name, value } = e.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleKeyPress = (event) => {\r\n    if (event.key === 'Enter') {\r\n      this.handleSubmit();\r\n    }\r\n  };\r\n\r\n\r\n  handleSubmit = () => {\r\n    const { username, password } = this.state;\r\n    if (!Validator(username, NAME_RULE)) {\r\n      showToast('Tên đăng nhập không hợp lệ', 'error');\r\n      return;\r\n    }\r\n    if (!Validator(password, DEFAULT_RULE)) {\r\n      showToast('Mật khẩu không hợp lệ', 'error');\r\n      return;\r\n    }\r\n    this.setState({ loading: true });\r\n    this.props\r\n      .userLogin(username, password)\r\n      .then(res => {\r\n        if (res && res.data) {\r\n          localStorage.setItem(\"current_user\", JSON.stringify(res.data?? \"\"))\r\n          this.setState({ loading: false });\r\n\r\n          showToast('Đăng nhập thành công', commonData.success_type);\r\n\r\n          this.props.onhide();\r\n          this.props.history.push('/');\r\n        }\r\n        else {\r\n          this.setState({ loading: false });\r\n          showToast('Tài khoản hoặc mật khẩu không chính xác', 'error');\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response);\r\n        this.setState({ loading: false });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"login-form\" >\r\n          <h2>Đăng nhập</h2>\r\n          <div className=\"form-group \">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Tên đăng nhập \"\r\n              id=\"username\"\r\n              name=\"username\"\r\n              value={this.state.username}\r\n              onChange={this.handleChange}\r\n              autoComplete=\"false\"\r\n            />\r\n            <i className=\"fa fa-user\"></i>\r\n          </div>\r\n          <div className=\"form-group log-status\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"Mật khẩu\"\r\n              id=\"Passwod\"\r\n              name=\"password\"\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              autoComplete=\"false\"\r\n            />\r\n            <i className=\"fa fa-lock\"></i>\r\n          </div>\r\n          <span className=\"alert\">Invalid Credentials</span>\r\n          <a\r\n            className=\"link\"\r\n            href=\"#\"\r\n            onClick={this.props.forgotPasswordClicked}\r\n          >\r\n            Quên mật khẩu ?\r\n          </a>\r\n          <LoadingButton\r\n            type=\"button\"\r\n            className=\"log-btn\"\r\n            loading={this.state.loading}\r\n            onClick={() => this.handleSubmit()}\r\n          >\r\n            Đăng nhập\r\n          </LoadingButton>\r\n          <div\r\n            onClick={this.props.registerclicked}\r\n            style={{\r\n              textAlign: \"center\",\r\n              fontSize: 12,\r\n              color: \"#c4c4c4\",\r\n              cursor: \"pointer\"\r\n            }}\r\n          >\r\n            Đăng ký thành viên mới\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLoginForm.propTypes = {\r\n  forgotPasswordClicked: PropTypes.func,\r\n  registerclicked: PropTypes.func\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  userLogin\r\n};\r\nconst mapStoreToProps = state => ({\r\n  login_loading: state.login.login_loading,\r\n  login_error: state.login.error\r\n});\r\n\r\nexport default connect(mapStoreToProps, mapDispatchToProps)(withRouter(LoginForm));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}