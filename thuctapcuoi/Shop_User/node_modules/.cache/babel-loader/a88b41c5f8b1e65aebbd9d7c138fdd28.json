{"ast":null,"code":"import { POST_CART_BEGIN, POST_CART_SUCCESS, POST_CART_FAIL, GET_CART_BY_USERID_BEGIN, GET_CART_BY_USERID_SUCCESS, GET_CART_BY_USERID_FAIL, ADD_TO_CART, RESTORE_CART_LOCALSTORAGE, REMOVE_FROM_CART } from \"../actions/cartAction\";\nconst initialState = {\n  cartItems: [],\n  loading: false,\n  error: {},\n  totalItems: 0\n};\nexport default (state = initialState, action) => {\n  var _action$payload$data$, _action$payload$data$2;\n  switch (action.type) {\n    case POST_CART_BEGIN:\n      return {\n        ...state,\n        loading: true,\n        error: {}\n      };\n    case POST_CART_SUCCESS:\n      return {\n        ...state,\n        cartItems: action.payload.data.cart,\n        loading: false,\n        totalItems: ((_action$payload$data$ = action.payload.data.cart) === null || _action$payload$data$ === void 0 ? void 0 : _action$payload$data$.length) || 0\n      };\n    case POST_CART_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload.error.response.data\n      };\n    case GET_CART_BY_USERID_BEGIN:\n      return {\n        ...state,\n        loading: true,\n        error: {}\n      };\n    case GET_CART_BY_USERID_SUCCESS:\n      return {\n        ...state,\n        cartItems: action.payload.data.cart,\n        loading: false,\n        totalItems: ((_action$payload$data$2 = action.payload.data.cart) === null || _action$payload$data$2 === void 0 ? void 0 : _action$payload$data$2.length) || 0\n      };\n    case GET_CART_BY_USERID_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload.error.response.data\n      };\n    case REMOVE_FROM_CART:\n      console.log(`REMOVE_FROM_CART=${JSON.stringify()}`);\n      var id = action.payload.product_Id;\n      console.log(`id=${JSON.stringify(id)}`);\n      const DataAferRemove = state && state.cartItems && Array.isArray(state.cartItems) ? state.cartItems.filter(item => item.product_Id != action.payload.product_Id) : null;\n      console.log(`DataAferRemove=${JSON.stringify(DataAferRemove.length)}`);\n      return {\n        ...state,\n        cartItems: DataAferRemove,\n        totalItems: (DataAferRemove === null || DataAferRemove === void 0 ? void 0 : DataAferRemove.length) || 0 // Tính tổng số sản phẩm\n      };\n    case ADD_TO_CART:\n      const existingItem = state && state.cartItems && Array.isArray(state.cartItems) ? state.cartItems.find(item => item.product_Id === action.payload.product_Id) : null;\n      let _qtty = action && action.payload.quantity || 1;\n      if (existingItem) {\n        // Nếu đã tồn tại, cập nhật số lượng của sản phẩm\n        const updateItems = state.cartItems.map(item => {\n          if (item.product_Id === action.payload.product_Id) {\n            return {\n              ...item,\n              quantity: item.quantity + _qtty // Hoặc cập nhật số lượng theo cách bạn muốn\n            };\n          }\n          return item;\n        });\n        return {\n          ...state,\n          cartItems: updateItems,\n          totalItems: (updateItems === null || updateItems === void 0 ? void 0 : updateItems.length) || 0 // Tính tổng số sản phẩm\n        };\n      } else {\n        // Nếu chưa tồn tại, thêm sản phẩm vào giỏ hàng\n        const newItems = [...state.cartItems, {\n          ...action.payload,\n          quantity: _qtty\n        }];\n        return {\n          ...state,\n          cartItems: newItems,\n          totalItems: (newItems === null || newItems === void 0 ? void 0 : newItems.length) || 0 // Tính tổng số sản phẩm\n        };\n      }\n    case RESTORE_CART_LOCALSTORAGE:\n      // Xử lý khôi phục dữ liệu từ Local Storage\n      if (action.payload) {\n        return action.payload;\n      }\n      return state;\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["POST_CART_BEGIN","POST_CART_SUCCESS","POST_CART_FAIL","GET_CART_BY_USERID_BEGIN","GET_CART_BY_USERID_SUCCESS","GET_CART_BY_USERID_FAIL","ADD_TO_CART","RESTORE_CART_LOCALSTORAGE","REMOVE_FROM_CART","initialState","cartItems","loading","error","totalItems","state","action","_action$payload$data$","_action$payload$data$2","type","payload","data","cart","length","response","console","log","JSON","stringify","id","product_Id","DataAferRemove","Array","isArray","filter","item","existingItem","find","_qtty","quantity","updateItems","map","newItems"],"sources":["E:/làm hộ/Thực tập cuối/Shop_User/src/redux/reducers/cartReducer.js"],"sourcesContent":["import {\r\n  POST_CART_BEGIN,\r\n  POST_CART_SUCCESS,\r\n  POST_CART_FAIL,\r\n  GET_CART_BY_USERID_BEGIN,\r\n  GET_CART_BY_USERID_SUCCESS,\r\n  GET_CART_BY_USERID_FAIL, ADD_TO_CART, RESTORE_CART_LOCALSTORAGE, REMOVE_FROM_CART\r\n} from \"../actions/cartAction\";\r\n\r\nconst initialState = {\r\n  cartItems: [],\r\n  loading: false,\r\n  error: {},\r\n  totalItems: 0,\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case POST_CART_BEGIN:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        error: {}\r\n      };\r\n    case POST_CART_SUCCESS:\r\n      return {\r\n        ...state,\r\n        cartItems: action.payload.data.cart,\r\n        loading: false,\r\n        totalItems: action.payload.data.cart?.length || 0\r\n      };\r\n    case POST_CART_FAIL:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload.error.response.data\r\n      };\r\n    case GET_CART_BY_USERID_BEGIN:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        error: {}\r\n      };\r\n    case GET_CART_BY_USERID_SUCCESS:\r\n      return {\r\n        ...state,\r\n        cartItems: action.payload.data.cart,\r\n        loading: false,\r\n        totalItems: action.payload.data.cart?.length || 0\r\n      };\r\n    case GET_CART_BY_USERID_FAIL:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload.error.response.data\r\n      };\r\n    case REMOVE_FROM_CART:\r\n      console.log(`REMOVE_FROM_CART=${JSON.stringify()}`);\r\n      var id = action.payload.product_Id;\r\n      console.log(`id=${JSON.stringify(id)}`);\r\n      const DataAferRemove = state && state.cartItems && Array.isArray(state.cartItems) ? state.cartItems.filter(item => item.product_Id != action.payload.product_Id) : null;\r\n      console.log(`DataAferRemove=${JSON.stringify(DataAferRemove.length)}`);\r\n      return {\r\n        ...state,\r\n        cartItems: DataAferRemove,\r\n        totalItems: DataAferRemove?.length || 0, // Tính tổng số sản phẩm\r\n      }\r\n    case ADD_TO_CART:\r\n      const existingItem = state && state.cartItems && Array.isArray(state.cartItems) ? state.cartItems.find(item => item.product_Id === action.payload.product_Id) : null;\r\n      let _qtty = (action && action.payload.quantity) || 1\r\n      if (existingItem) {\r\n        // Nếu đã tồn tại, cập nhật số lượng của sản phẩm\r\n        const updateItems = state.cartItems.map(item => {\r\n          if (item.product_Id === action.payload.product_Id) {\r\n            return {\r\n              ...item,\r\n              quantity: item.quantity + _qtty, // Hoặc cập nhật số lượng theo cách bạn muốn\r\n            };\r\n          }\r\n          return item;\r\n        });\r\n        return {\r\n          ...state,\r\n          cartItems: updateItems,\r\n          totalItems: updateItems?.length || 0, // Tính tổng số sản phẩm\r\n        }\r\n\r\n      } else {\r\n        // Nếu chưa tồn tại, thêm sản phẩm vào giỏ hàng\r\n        const newItems = [...state.cartItems, { ...action.payload, quantity: _qtty }];\r\n        return {\r\n          ...state,\r\n          cartItems: newItems,\r\n          totalItems: newItems?.length || 0, // Tính tổng số sản phẩm\r\n        };\r\n      }\r\n    case RESTORE_CART_LOCALSTORAGE:\r\n      // Xử lý khôi phục dữ liệu từ Local Storage\r\n      if (action.payload) {\r\n        return action.payload;\r\n      }\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}